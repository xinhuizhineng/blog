---
title: "微信支付"
author: "常香玉"              # 文章作者
description : "微信支付"    # 文章描述信息
date: 2023-3-12T13:05:18+08:00
lastmod: 2023-3-12         # 文章修改日期
tags : [                    # 文章所属标签
    "Web前端",
    "uniapp",
    "支付"
]
categories : [              # 文章所属标签
    "Web前端",
    "H5"
]

---

1. 公众号支付(微信游览器，微信客户端扫码)

网页授权
https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx520c15f417810387&redirect_uri=https%3A%2F%2Fchong.qq.com%2Fphp%2Findex.php%3Fd%3D%26c%3DwxAdapter%26m%3DmobileDeal%26showwxpaytitle%3D1%26vb2ctag%3D4_2030_5_1194_60&response_type=code&scope=snsapi_base&state=123#wechat_redirect

通过授权获取到的code和appid去获取openid，然后调用jsapi支付

说明： redirect_uri为授权地址，需要在公众号平台设置授权，要求只能是域名， appid为商户的appid

2. H5支付（app嵌入H5，企业微信H5，H5游览器）

通过调用后台接口返回pay_url，直接跳转到链接地址支付

说明： appid为商户的appid

3. 小程序支付

wx.login()获取code,然后通过appid和code获取openid，通过调用wx.requestPayment()支付

说明： appid为小程序appid
